library(tidyverse)
library(data.table)
source('C:/Users/Cole/Documents/GitHub/PLIC/Process-Merge-Concat/PLIC_DataProcessing.R')
full.df <- fread('C:/Users/Cole/Documents/PLIC_DATA/Collective_Surveys/Complete/Complete_Concat.csv') %>%
Merge.CIS(., Matched = TRUE) %>%
filter(Survey_x == 'C' | Survey_y == 'C') %>%
mutate(Lab_Level = case_when(
Lab_Level == 'Intro-Algebra' ~ 'FY.Alg',
Lab_Level == 'Intro-Calculus' ~ 'FY.Calc',
(Lab_Level == 'Sophomore') | (Lab_Level == 'Junior') | (Lab_Level == 'Senior') ~ 'BFY',
TRUE ~ NA_character_
),
Lab_Purpose = case_when(
Lab_Purpose == 'Both about equally' ~ 'Both',
Lab_Purpose == 'Develop lab skills' ~ 'Skills',
Lab_Purpose == 'Reinforce physics concepts' ~ 'Concepts',
TRUE ~ NA_character_
))
print('Total # of students in dataset...')
nrow(full.df)
print('Total # of classes in dataset...')
length(unique(full.df$Class_ID))
print('Total # of institutions in dataset..')
length(unique(full.df$School))
# Remove whole classes without goal and/or level information or that were only administered at pre or post
full.df <- data.table(full.df)[, `:=`(N.students = .N, pre.rate = sum(Survey_x == 'C')/.N,
post.rate = sum(Survey_y == 'C')/.N),  .(Class_ID)]
full.df <- full.df %>%
filter(!is.na(Lab_Level) & !is.na(Lab_Purpose) & (pre.rate > 0) & (post.rate > 0))
print('# of remaining students in full dataset...')
nrow(full.df)
print('# of remaining classes in full dataset...')
length(unique(full.df$Class_ID))
print('Total # of institutions in dataset..')
length(unique(full.df$School))
df.matched <- full.df %>%
filter(!is.na(PreScores) & !is.na(PostScores))
print('# of students in matched dataset...')
nrow(df.matched)
print('# of classes in matched dataset...')
length(unique(df.matched$Class_ID))
print('Total # of institutions in dataset..')
length(unique(df.matched$School))
table(df.matched[!duplicated(df.matched$School),]$Institution_Type, exclude = NULL)
table(df.matched[!duplicated(df.matched$Class_ID),]$Lab_Level, exclude = NULL)
table(df.matched[!duplicated(df.matched$Class_ID),]$Lab_Purpose, exclude = NULL)
colSums(df.matched[, c('Q6f_1_y', 'Q6f_3_y', 'Q6f_5_y', 'Q6f_7_y')], na.rm = TRUE)
full.df <- fread('C:/Users/Cole/Documents/PLIC_DATA/Collective_Surveys/Complete/Complete_Concat.csv') %>%
Merge.CIS(., Matched = TRUE) %>%
filter(Survey_x == 'C' | Survey_y == 'C') %>%
mutate(Lab_Level = case_when(
Lab_Level == 'Intro-Algebra' ~ 'FY.Alg',
Lab_Level == 'Intro-Calculus' ~ 'FY.Calc',
(Lab_Level == 'Sophomore') | (Lab_Level == 'Junior') | (Lab_Level == 'Senior') ~ 'BFY',
TRUE ~ NA_character_
),
Lab_Purpose = case_when(
Lab_Purpose == 'Both about equally' ~ 'Both',
Lab_Purpose == 'Develop lab skills' ~ 'Skills',
Lab_Purpose == 'Reinforce physics concepts' ~ 'Concepts',
TRUE ~ NA_character_
))
print('Total # of students in dataset...')
nrow(full.df)
print('Total # of classes in dataset...')
length(unique(full.df$Class_ID))
print('Total # of institutions in dataset..')
length(unique(full.df$School))
table(df.full[!duplicated(df.full$School),]$Institution_Type, exclude = NULL)
full.df <- fread('C:/Users/Cole/Documents/PLIC_DATA/Collective_Surveys/Complete/Complete_Concat.csv') %>%
Merge.CIS(., Matched = TRUE) %>%
filter(Survey_x == 'C' | Survey_y == 'C') %>%
mutate(Lab_Level = case_when(
Lab_Level == 'Intro-Algebra' ~ 'FY.Alg',
Lab_Level == 'Intro-Calculus' ~ 'FY.Calc',
(Lab_Level == 'Sophomore') | (Lab_Level == 'Junior') | (Lab_Level == 'Senior') ~ 'BFY',
TRUE ~ NA_character_
),
Lab_Purpose = case_when(
Lab_Purpose == 'Both about equally' ~ 'Both',
Lab_Purpose == 'Develop lab skills' ~ 'Skills',
Lab_Purpose == 'Reinforce physics concepts' ~ 'Concepts',
TRUE ~ NA_character_
))
print('Total # of students in dataset...')
nrow(full.df)
print('Total # of classes in dataset...')
length(unique(full.df$Class_ID))
print('Total # of institutions in dataset..')
length(unique(full.df$School))
table(full.df[!duplicated(full.df$School),]$Institution_Type, exclude = NULL)
table(full.df[!duplicated(full.df$Class_ID),]$Lab_Level, exclude = NULL)
table(full.df[!duplicated(full.df$Class_ID),]$Lab_Purpose, exclude = NULL)
# Remove whole classes without goal and/or level information or that were only administered at pre or post
full.df <- data.table(full.df)[, `:=`(N.students = .N, pre.rate = sum(Survey_x == 'C')/.N,
post.rate = sum(Survey_y == 'C')/.N),  .(Class_ID)]
full.df <- full.df %>%
filter(!is.na(Lab_Level) & !is.na(Lab_Purpose) & (pre.rate > 0) & (post.rate > 0))
print('# of remaining students in full dataset...')
nrow(full.df)
print('# of remaining classes in full dataset...')
length(unique(full.df$Class_ID))
print('Total # of institutions in dataset..')
length(unique(full.df$School))
df.matched <- full.df %>%
filter(!is.na(PreScores) & !is.na(PostScores))
print('# of students in matched dataset...')
nrow(df.matched)
print('# of classes in matched dataset...')
length(unique(df.matched$Class_ID))
print('Total # of institutions in dataset..')
length(unique(df.matched$School))
table(df.matched[!duplicated(df.matched$School),]$Institution_Type, exclude = NULL)
table(df.matched[!duplicated(df.matched$Class_ID),]$Lab_Level, exclude = NULL)
table(df.matched[!duplicated(df.matched$Class_ID),]$Lab_Purpose, exclude = NULL)
colSums(df.matched[, c('Q6f_1_y', 'Q6f_3_y', 'Q6f_5_y', 'Q6f_7_y')], na.rm = TRUE)
full.df <- fread('C:/Users/Cole/Documents/PLIC_DATA/Collective_Surveys/Complete/Complete_Concat.csv') %>%
Merge.CIS(., Matched = TRUE) %>%
filter(Survey_x == 'C' | Survey_y == 'C') %>%
mutate(Lab_Level = case_when(
Lab_Level == 'Intro-Algebra' ~ 'FY.Alg',
Lab_Level == 'Intro-Calculus' ~ 'FY.Calc',
(Lab_Level == 'Sophomore') | (Lab_Level == 'Junior') | (Lab_Level == 'Senior') ~ 'BFY',
TRUE ~ NA_character_
),
Lab_Purpose = case_when(
Lab_Purpose == 'Both about equally' ~ 'Both',
Lab_Purpose == 'Develop lab skills' ~ 'Skills',
Lab_Purpose == 'Reinforce physics concepts' ~ 'Concepts',
TRUE ~ NA_character_
))
print('Total # of students in dataset...')
nrow(full.df)
print('Total # of classes in dataset...')
length(unique(full.df$Class_ID))
print('Total # of institutions in dataset..')
length(unique(full.df$School))
table(full.df[!duplicated(full.df$School),]$Institution_Type, exclude = NULL)
table(full.df[!duplicated(full.df$Class_ID),]$Lab_Level, exclude = NULL)
# Remove whole classes without goal and/or level information or that were only administered at pre or post
full.df <- data.table(full.df)[, `:=`(N.students = .N, pre.rate = sum(Survey_x == 'C')/.N,
post.rate = sum(Survey_y == 'C')/.N),  .(Class_ID)]
full.df <- full.df %>%
filter(!is.na(Lab_Level) & !is.na(Lab_Purpose) & (pre.rate > 0) & (post.rate > 0))
print('# of remaining students in full dataset...')
nrow(full.df)
print('# of remaining classes in full dataset...')
length(unique(full.df$Class_ID))
print('Total # of institutions in dataset..')
length(unique(full.df$School))
df.matched <- full.df %>%
filter(!is.na(PreScores) & !is.na(PostScores))
print('# of students in matched dataset...')
nrow(df.matched)
print('# of classes in matched dataset...')
length(unique(df.matched$Class_ID))
print('Total # of institutions in dataset..')
length(unique(df.matched$School))
table(df.matched[!duplicated(df.matched$School),]$Institution_Type, exclude = NULL)
table(df.matched[!duplicated(df.matched$Class_ID),]$Lab_Level, exclude = NULL)
table(df.matched[!duplicated(df.matched$Class_ID),]$Lab_Purpose, exclude = NULL)
colSums(df.matched[, c('Q6f_1_y', 'Q6f_3_y', 'Q6f_5_y', 'Q6f_7_y')], na.rm = TRUE)
