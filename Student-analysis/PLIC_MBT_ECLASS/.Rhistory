library(tidyverse)
library(data.table)
library(lavaan)
library(semPlot)
answers <- read.xlsx('C:/Users/Cole/Documents/ECLASS_DATA/Answers_Template.xlsx', sheetName = 'Converted', rowIndex = c(2, 4), header = FALSE)
library(tidyverse)
library(xlsx)
library(data.table)
library(lavaan)
library(semPlot)
answers <- read.xlsx('C:/Users/Cole/Documents/ECLASS_DATA/Answers_Template.xlsx', sheetName = 'Converted', rowIndex = c(2, 4), header = FALSE)
colnames(answers) <- as.character(unlist(answers[2,]))
answers <- answers[1,]
answers <- as.data.frame(t(answers)) %>%
`colnames<-`(c('Answer')) %>%
mutate(Question = row.names(.)) %>%
filter(!grepl('\\.1$', Question)) %>%
mutate(Answer = case_when(
Answer == 'A' ~ 1,
Answer == 'D' ~ -1,
TRUE ~ NA_real_
)) %>%
filter(!is.na(Answer))
answers <- data.frame(t(answers)) %>%
`colnames<-`(as.character(unlist(.[2,]))) %>%
slice(., 1)
answers.cols <- names(answers)
Read.Score <- function(file){
dt <- fread(file) %>%
filter((V10 == 1) & (q40a == 4)) # remove students that didn't finish or pay attention
dt[, (answers.cols) := lapply(.SD, function(x) case_when(x >= 4 ~ 1,
x <= 2 ~ -1,
TRUE ~ 0)),
.SDcols = answers.cols]
scores.df <- sweep(dt[, ..answers.cols], 2,
as.numeric(as.character(unlist(answers))), "*")
scores.df$student.score <- rowSums(scores.df %>% select(grep("a$", names(.))))
scores.df$expert.score <- rowSums(scores.df %>% select(grep("b$", names(.))))
df <- cbind(dt, scores.df[, c('student.score', 'expert.score')])
return(df)
}
df.ECLASS.P1116.F2017pre <- Read.Score.MBT('C:/Users/Cole/Documents/ECLASS_DATA/Raw_Surveys/Fall2017/PRE/Fall2017PRE-Cornell University-Phys-1116-Natasha_Holmes-ezo65e90NlkpwRD.csv') %>%
select(Q3_1_TEXT, Q3_2_TEXT, Q3_3_TEXT, student.score, expert.score) #%>%
library(tidyverse)
library(xlsx)
library(data.table)
library(lavaan)
library(semPlot)
answers <- read.xlsx('C:/Users/Cole/Documents/ECLASS_DATA/Answers_Template.xlsx', sheetName = 'Converted', rowIndex = c(2, 4), header = FALSE)
colnames(answers) <- as.character(unlist(answers[2,]))
answers <- answers[1,]
answers <- as.data.frame(t(answers)) %>%
`colnames<-`(c('Answer')) %>%
mutate(Question = row.names(.)) %>%
filter(!grepl('\\.1$', Question)) %>%
mutate(Answer = case_when(
Answer == 'A' ~ 1,
Answer == 'D' ~ -1,
TRUE ~ NA_real_
)) %>%
filter(!is.na(Answer))
answers <- data.frame(t(answers)) %>%
`colnames<-`(as.character(unlist(.[2,]))) %>%
slice(., 1)
answers.cols <- names(answers)
Read.Score.ECLASS <- function(file){
dt <- fread(file) %>%
filter((V10 == 1) & (q40a == 4)) # remove students that didn't finish or pay attention
dt[, (answers.cols) := lapply(.SD, function(x) case_when(x >= 4 ~ 1,
x <= 2 ~ -1,
TRUE ~ 0)),
.SDcols = answers.cols]
scores.df <- sweep(dt[, ..answers.cols], 2,
as.numeric(as.character(unlist(answers))), "*")
scores.df$student.score <- rowSums(scores.df %>% select(grep("a$", names(.))))
scores.df$expert.score <- rowSums(scores.df %>% select(grep("b$", names(.))))
df <- cbind(dt, scores.df[, c('student.score', 'expert.score')])
return(df)
}
df.ECLASS.P1116.F2017pre <- Read.Score.ECLASS('C:/Users/Cole/Documents/ECLASS_DATA/Raw_Surveys/Fall2017/PRE/Fall2017PRE-Cornell University-Phys-1116-Natasha_Holmes-ezo65e90NlkpwRD.csv') %>%
select(Q3_1_TEXT, Q3_2_TEXT, Q3_3_TEXT, student.score, expert.score) #%>%
library(tidyverse)
library(xlsx)
library(data.table)
library(lavaan)
library(semPlot)
answers <- read.xlsx('C:/Users/Cole/Documents/ECLASS_DATA/Answers_Template.xlsx', sheetName = 'Converted', rowIndex = c(2, 4), header = FALSE)
colnames(answers) <- as.character(unlist(answers[2,]))
answers <- answers[1,]
answers <- as.data.frame(t(answers)) %>%
`colnames<-`(c('Answer')) %>%
mutate(Question = row.names(.)) %>%
filter(!grepl('\\.1$', Question)) %>%
mutate(Answer = case_when(
Answer == 'A' ~ 1,
Answer == 'D' ~ -1,
TRUE ~ NA_real_
)) %>%
filter(!is.na(Answer))
answers <- data.frame(t(answers)) %>%
`colnames<-`(as.character(unlist(.[2,]))) %>%
slice(., 1)
answers.cols <- names(answers)
Read.Score.ECLASS <- function(file){
dt <- fread(file)
dt[, (answers.cols) := lapply(.SD, function(x) case_when(x >= 4 ~ 1,
x <= 2 ~ -1,
TRUE ~ 0)),
.SDcols = answers.cols]
scores.df <- sweep(dt[, ..answers.cols], 2,
as.numeric(as.character(unlist(answers))), "*")
scores.df$student.score <- rowSums(scores.df %>% select(grep("a$", names(.))))
scores.df$expert.score <- rowSums(scores.df %>% select(grep("b$", names(.))))
df <- cbind(dt, scores.df[, c('student.score', 'expert.score')]) %>%
filter((V10 == 1) & (q40a == 4)) # remove students that didn't finish or pay attention
return(df)
}
df.ECLASS.P1116.F2017pre <- Read.Score.ECLASS('C:/Users/Cole/Documents/ECLASS_DATA/Raw_Surveys/Fall2017/PRE/Fall2017PRE-Cornell University-Phys-1116-Natasha_Holmes-ezo65e90NlkpwRD.csv') %>%
select(Q3_1_TEXT, Q3_2_TEXT, Q3_3_TEXT, student.score, expert.score) #%>%
#`colnames<-`(c('last.name', 'first.name', 'net.id', 'student.id', 'MBT.score'))
df.ECLASS.P1116.F2017pre
df.ECLASS.P1116.F2017pre <- Read.Score.ECLASS('C:/Users/Cole/Documents/ECLASS_DATA/Raw_Surveys/Fall2017/PRE/Fall2017PRE-Cornell University-Phys-1116-Natasha_Holmes-ezo65e90NlkpwRD.csv') %>%
select(Q3_1_TEXT, Q3_2_TEXT, Q3_3_TEXT, student.score, expert.score) #%>%
`colnames<-`(c('first.name', 'last.name', 'ID', 'student.score', 'expert.score'))
df.ECLASS.P1116.F2017pre <- Read.Score.ECLASS('C:/Users/Cole/Documents/ECLASS_DATA/Raw_Surveys/Fall2017/PRE/Fall2017PRE-Cornell University-Phys-1116-Natasha_Holmes-ezo65e90NlkpwRD.csv') %>%
select(Q3_1_TEXT, Q3_2_TEXT, Q3_3_TEXT, student.score, expert.score) %>%
`colnames<-`(c('first.name', 'last.name', 'ID', 'student.score', 'expert.score'))
df.ECLASS.P1116.F2017pre
answers <- read.xlsx('C:/Users/Cole/Documents/ECLASS_DATA/Answers_Template.xlsx', sheetName = 'Converted', rowIndex = c(2, 4), header = FALSE)
colnames(answers) <- as.character(unlist(answers[2,]))
answers <- answers[1,]
answers <- as.data.frame(t(answers)) %>%
`colnames<-`(c('Answer')) %>%
mutate(Question = row.names(.)) %>%
filter(!grepl('\\.1$', Question)) %>%
mutate(Answer = case_when(
Answer == 'A' ~ 1,
Answer == 'D' ~ -1,
TRUE ~ NA_real_
)) %>%
filter(!is.na(Answer))
answers <- data.frame(t(answers)) %>%
`colnames<-`(as.character(unlist(.[2,]))) %>%
slice(., 1)
answers.cols <- names(answers)
Read.Score.ECLASS <- function(file){
dt <- fread(file)
dt[, (answers.cols) := lapply(.SD, function(x) case_when(x >= 4 ~ 1,
x <= 2 ~ -1,
TRUE ~ 0)),
.SDcols = answers.cols]
scores.df <- sweep(dt[, ..answers.cols], 2,
as.numeric(as.character(unlist(answers))), "*")
scores.df$student.score <- rowSums(scores.df %>% select(grep("a$", names(.))))
scores.df$expert.score <- rowSums(scores.df %>% select(grep("b$", names(.))))
df <- cbind(dt, scores.df[, c('student.score', 'expert.score')]) %>%
filter((V10 == 1) & (q40a == 4)) %>% # remove students that didn't finish/click filter
select(Q3_1_TEXT, Q3_2_TEXT, Q3_3_TEXT, student.score, expert.score) %>%
`colnames<-`(c('first.name', 'last.name', 'ID', 'student.score', 'expert.score'))
return(df)
}
df.ECLASS.P1116.F2017pre <- Read.Score.ECLASS('C:/Users/Cole/Documents/ECLASS_DATA/Raw_Surveys/Fall2017/PRE/Fall2017PRE-Cornell University-Phys-1116-Natasha_Holmes-ezo65e90NlkpwRD.csv')
df.ECLASS.P1116.F2017pre
df.ECLASS.P1116.F2017pre <- Read.Score.ECLASS('C:/Users/Cole/Documents/ECLASS_DATA/Raw_Surveys/Fall2017/PRE/Fall2017PRE-Cornell University-Phys-1116-Natasha_Holmes-ezo65e90NlkpwRD.csv')
df.ECLASS.P1116.F2017post <- Read.Score.ECLASS('C:/Users/Cole/Documents/ECLASS_DATA/Raw_Surveys/Fall2017/POST/Fall2017POST-Cornell University-Phys-1116-Natasha_Holmes-e9iS05zkYUGdsc5.csv')
df.ECLASS.P1116.F2017post
df.ECLASS.P1116.F2017pre <- Read.Score.ECLASS('C:/Users/Cole/Documents/ECLASS_DATA/Raw_Surveys/Fall2017/PRE/Fall2017PRE-Cornell University-Phys-1116-Natasha_Holmes-ezo65e90NlkpwRD.csv')
df.ECLASS.P1116.F2017post <- Read.Score.ECLASS('C:/Users/Cole/Documents/ECLASS_DATA/Raw_Surveys/Fall2017/POST/Fall2017POST-Cornell University-Phys-1116-Natasha_Holmes-e9iS05zkYUGdsc5.csv')
df.ECLASS.P2217.F2017pre <- Read.Score.ECLASS('C:/Users/Cole/Documents/ECLASS_DATA/Raw_Surveys/Fall2017/PRE/Fall2017PRE-Cornell University-Phys-2217-Natasha_Holmes-1ZCOw6uPVntmS7b.csv')
df.ECLASS.P2217.F2017post <- Read.Score.ECLASS('C:/Users/Cole/Documents/ECLASS_DATA/Raw_Surveys/Fall2017/POST/Fall2017POST-Cornell University-Phys-2217-Natasha_Holmes-6SBVr7ddgt7D2Pr.csv')
df.ECLASS.P2217.F2017post
df.ECLASS.P1116.F2017pre <- Read.Score.ECLASS('C:/Users/Cole/Documents/ECLASS_DATA/Raw_Surveys/Fall2017/PRE/Fall2017PRE-Cornell University-Phys-1116-Natasha_Holmes-ezo65e90NlkpwRD.csv')
df.ECLASS.P1116.F2017post <- Read.Score.ECLASS('C:/Users/Cole/Documents/ECLASS_DATA/Raw_Surveys/Fall2017/POST/Fall2017POST-Cornell University-Phys-1116-Natasha_Holmes-e9iS05zkYUGdsc5.csv')
df.ECLASS.P2217.F2017pre <- Read.Score.ECLASS('C:/Users/Cole/Documents/ECLASS_DATA/Raw_Surveys/Fall2017/PRE/Fall2017PRE-Cornell University-Phys-2217-Natasha_Holmes-1ZCOw6uPVntmS7b.csv')
df.ECLASS.P2217.F2017post <- Read.Score.ECLASS('C:/Users/Cole/Documents/ECLASS_DATA/Raw_Surveys/Fall2017/POST/Fall2017POST-Cornell University-Phys-2217-Natasha_Holmes-6SBVr7ddgt7D2Pr.csv')
df.ECLASS.P2218.F2017pre <- Read.Score.ECLASS('C:/Users/Cole/Documents/ECLASS_DATA/Raw_Surveys/Fall2017/PRE/Fall2017PRE-Cornell University-Phys-2218-Natasha_Holmes-0cwmwYnSpRKeTDT.csv')
df.ECLASS.P2218.F2017post <- Read.Score.ECLASS('C:/Users/Cole/Documents/ECLASS_DATA/Raw_Surveys/Fall2017/POST/Fall2017POST-Cornell University-Phys-2218-Natasha_Holmes-9uIb86xtOdbM0ct.csv')
df.ECLASS.P2218.F2017post
